{% extends 'main_page/base.html' %}
{% load static %}

{% block content %}
<main class="content post_style">
    <section class="wrap_post">
        {% if line.image %}
        <img class="preview_img" src="{{ line.image.url }}" alt="post_image">
        <div class="line_parent">
            <div class="line"
                 style="background: {{ line.color }};"></div>
            <div class="circle" style="background: {{ line.color }}">
                <p style="color: {{ line.color_text }};">{{ line.number }}</p>
            </div>
        </div>
        {% else %}
        <div class="line_parent mt90">
            <div class="line"
                 style="background: linear-gradient(90deg, rgba(0,0,0,0) 0%, {{ line.color }} 10%, {{ line.color }} 90%, rgba(0,0,0,0) 100%);"></div>
            <div class="circle" style="background: {{ line.color }}">
                <p style="color: {{ line.color_text }};">{{ line.number }}</p>
            </div>
        </div>
        {% endif %}
            <ul class="horizontal_stations_list">
                {% for st in line.station_set.all %}
                    <li class="element" style="box-shadow: 0px 2px 12px 2px {{ line.color }};">
                        <a href="{{ st.get_absolute_url }}">
                            {% if st.status == 'Эксплуатируется' %}
                                <div class="num_line" style="background: {{ line.color }};">
                                    <p style="color: {{ line.color_text }};">{{ line.number }}</p>
                                </div>
                            {% else %}
                                <div class="num_line" style="background: {{ line.color }}80;">
                                    <p style="color: {{ line.color_text }};">{{ line.number }}</p>
                                </div>
                            {% endif %}
                            {% if st.image %}
                                <img class="station_img" src="{{ st.image.url }}" alt="{{ st.title }}">
                            {% else %}
                                <img class="station_img" src="{% static 'images/plug.jpg' %}" alt="post_image">
                            {% endif %}
                            <div class="station_text">
                                <h2>{{ st.title | truncatechars:50 }}</h2>
                                <p>Соостояние: {{ st.status }}</p>
                            </div>
                        </a>
                    </li>
                {% endfor %}
            </ul>
        <div class="wrap_text">
            <h1>{{ line.title }}</h1>
            <p>{{ line.content | safe | linebreaksbr }}</p>
        </div>
    </section>
</main>
{% endblock %}